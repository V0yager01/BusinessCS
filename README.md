# Business Management System

Упрощённая система управления бизнесом / командой. Позволяет работать с
пользователями, командами, задачами, встречами и оценками эффективности.

## Функциональность

- **Пользователи**
  - Регистрация и авторизация по токену.
  - Роли: `user`, `manager`, `admin`.
  - Просмотр профиля.

- **Команды**
  - Создание команд (только менеджеры/админы).
  - Автоматическое добавление создателя в команду с ролью `manager`.
  - Приглашение/удаление пользователей и изменение роли в команде.
  - Просмотр собственных команд + состава команды.

- **Задачи**
  - Создание задач (указание команды, исполнителя, дедлайна, статуса).
  - Обновление/удаление задачи — только автор.
  - Комментирование задачи любым участником.
  - Просмотр личных задач / задач команды.

- **Оценка выполнения**
  - Автор (руководитель) оценивает завершённую задачу (1–5).
  - Автоматическая смена статуса на `done`.
  - Просмотр оценок за период, средняя оценка.

- **Встречи**
  - Создание встречи с длительностью.
  - Создатель автоматически добавляется в участники.
  - Приглашение других пользователей и проверка занятости.
  - Просмотр собственных встреч.

- **Календарь**
  - Месячный календарь с задачами и встречами.
  - Клик по дате → список событий (время, тип).

- **Админ-панель**
  - SqlAdmin для сущностей Users/Teams/Tasks/Meetings/Evaluations.

## Установка и запуск

1. **Клонирование**

   ```
   git clone git@github.com:V0yager01/BusinessCS.git
   cd BusinessCS
   ```

2. **Виртуальное окружение**

   ```
   python -m venv venv
   source venv/bin/activate  # Linux/macOS
   venv\Scripts\activate     # Windows
   ```

3. **Зависимости**

   ```
   pip install -r requirements.txt
   ```

4. **Переменные окружения**

   - Создать файл .env
   ```
   # Security
    SECRET_KEY = "SECRET_KEY"
    ALGORITHM = "HS256"
    
    # MODE
    MODE=prod
    
    # PostgreSQL
    DB_HOST=localhost
    DB_PORT=5433
    DB_PORT_LOCAL=5432
    DB_USER=postgres 
    DB_NAME=test_db
    DB_PASSWORD=example
    
    # Adminer
    ADMINER_PORT=8080
    ADMINER_PORT_LOCAL=8080
   ```

5. **Запуск docker-контейнера(опционально)**
   ```
   docker compose up
   ```
6. **Миграции**

   ```
   alembic upgrade head
   ```

7. **Запуск**

   ```
   uvicorn src.main:app --reload
   ```

## Структура проекта

```
src/
├── main.py                # Точка входа FastAPI
├── database/              # Настройки БД и базовый репозиторий
├── security/              # Авторизация и проверки ролей
├── user/                  # Пользователи (модели, схемы, сервис, роуты)
├── team/                  # Команды
├── task/                  # Задачи, комментарии
├── meeting/               # Встречи
├── evaluation/            # Оценивание задач
├── routers/               # Jinja2 страницы (teams, tasks и т.д.)
├── templates/             # HTML шаблоны
├── static/                # JavaScript (fetch API) и CSS
└── tests/                 # Интеграционные тесты API (pytest)
```
## Статические файлы и шаблоны

   - `src/templates` — Jinja2 шаблоны.
   - `src/static` — JS/CSS.

## Документация и ссылки
- Swagger UI: `http://localhost:8000/docs`
- Redoc: `http://localhost:8000/redoc`
- Admin-panel `http://localhost:8000/admin`
- Базовый URL: `http://localhost:8000`.
